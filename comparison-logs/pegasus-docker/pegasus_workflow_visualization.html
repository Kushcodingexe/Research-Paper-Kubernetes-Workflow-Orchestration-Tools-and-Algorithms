<!DOCTYPE html>
<html>
<head>
    <title>Pegasus Rack Resiliency Workflow - Montage Pattern</title>
    <script src="https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.min.js"></script>
    <style>
        body { 
            font-family: 'Segoe UI', Arial, sans-serif; 
            margin: 20px; 
            background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);
            color: #fff;
            min-height: 100vh;
        }
        h1 { 
            text-align: center; 
            color: #00d4ff;
            text-shadow: 0 0 10px rgba(0,212,255,0.5);
        }
        h2 { color: #ff6b6b; margin-top: 30px; }
        .container { max-width: 1200px; margin: 0 auto; }
        .diagram { 
            background: rgba(255,255,255,0.05); 
            padding: 20px; 
            border-radius: 15px; 
            margin: 20px 0;
            border: 1px solid rgba(255,255,255,0.1);
        }
        .mermaid { text-align: center; }
        .stats { 
            display: grid; 
            grid-template-columns: repeat(3, 1fr); 
            gap: 20px; 
            margin: 30px 0;
        }
        .stat-card {
            background: linear-gradient(135deg, rgba(0,212,255,0.2), rgba(255,107,107,0.2));
            padding: 20px;
            border-radius: 10px;
            text-align: center;
            border: 1px solid rgba(255,255,255,0.2);
        }
        .stat-value { font-size: 2em; font-weight: bold; color: #00d4ff; }
        .stat-label { color: #aaa; }
        table { 
            width: 100%; 
            border-collapse: collapse; 
            margin: 20px 0;
            background: rgba(255,255,255,0.05);
            border-radius: 10px;
            overflow: hidden;
        }
        th, td { padding: 12px; text-align: left; border-bottom: 1px solid rgba(255,255,255,0.1); }
        th { background: rgba(0,212,255,0.2); color: #00d4ff; }
        tr:hover { background: rgba(255,255,255,0.05); }
        .legend { margin: 20px 0; padding: 15px; background: rgba(255,255,255,0.05); border-radius: 10px; }
        .legend span { margin-right: 20px; }
    </style>
</head>
<body>
    <div class="container">
        <h1>üöÄ Pegasus Rack Resiliency Workflow</h1>
        <h2>Montage Pattern Mapping</h2>
        
        <div class="legend">
            <strong>Montage Pattern Stages:</strong><br>
            <span>üìä mProjectPP ‚Üí Health Checks</span>
            <span>üîÑ mDiff ‚Üí Node Failure Sim</span>
            <span>üìà mFitPlane ‚Üí Interim Check</span>
            <span>‚öôÔ∏è mBackground ‚Üí Rack Failure Sim</span>
            <span>üìã mImgtbl ‚Üí Final Check</span>
        </div>
        
        <div class="stats">
            <div class="stat-card">
                <div class="stat-value">7</div>
                <div class="stat-label">Jobs (1x Scale)</div>
            </div>
            <div class="stat-card">
                <div class="stat-value">14</div>
                <div class="stat-label">Jobs (2x Scale)</div>
            </div>
            <div class="stat-card">
                <div class="stat-value">28</div>
                <div class="stat-label">Jobs (4x Scale)</div>
            </div>
        </div>
        
        <h2>1x Scale Workflow (7 Jobs)</h2>
        <div class="diagram">
            <div class="mermaid">
flowchart TD
    subgraph Stage1["Stage 1: Health Checks (mProjectPP)"]
        HC1[Health Check 1]
        HC2[Health Check 2]
        HC3[Health Check 3]
    end
    
    subgraph Stage2["Stage 2: Node Failure Sim (mDiff)"]
        NS1[Node Sim 1]
    end
    
    subgraph Stage3["Stage 3: Interim Health Check (mFitPlane)"]
        IC1[Interim Check 1]
    end
    
    subgraph Stage4["Stage 4: Rack Failure Sim (mBackground)"]
        RS1[Rack Sim 1]
    end
    
    subgraph Stage5["Stage 5: Final Health Check (mImgtbl)"]
        FC1[Final Check 1]
    end

    HC1 --> NS1
    HC2 --> NS1
    HC3 --> NS1
    NS1 --> IC1
    IC1 --> RS1
    RS1 --> FC1

            </div>
        </div>
        
        <h2>2x Scale Workflow (14 Jobs)</h2>
        <div class="diagram">
            <div class="mermaid">
flowchart TD
    subgraph Stage1["Stage 1: Health Checks (mProjectPP)"]
        HC1[Health Check 1]
        HC2[Health Check 2]
        HC3[Health Check 3]
        HC4[Health Check 4]
        HC5[Health Check 5]
        HC6[Health Check 6]
    end
    
    subgraph Stage2["Stage 2: Node Failure Sim (mDiff)"]
        NS1[Node Sim 1]
        NS2[Node Sim 2]
    end
    
    subgraph Stage3["Stage 3: Interim Health Check (mFitPlane)"]
        IC1[Interim Check 1]
        IC2[Interim Check 2]
    end
    
    subgraph Stage4["Stage 4: Rack Failure Sim (mBackground)"]
        RS1[Rack Sim 1]
        RS2[Rack Sim 2]
    end
    
    subgraph Stage5["Stage 5: Final Health Check (mImgtbl)"]
        FC1[Final Check 1]
        FC2[Final Check 2]
    end

    HC1 --> NS1
    HC1 --> NS2
    HC2 --> NS1
    HC2 --> NS2
    HC3 --> NS1
    HC3 --> NS2
    HC4 --> NS1
    HC4 --> NS2
    HC5 --> NS1
    HC5 --> NS2
    HC6 --> NS1
    HC6 --> NS2
    NS1 --> IC1
    NS1 --> IC2
    NS2 --> IC1
    NS2 --> IC2
    IC1 --> RS1
    IC1 --> RS2
    IC2 --> RS1
    IC2 --> RS2
    RS1 --> FC1
    RS1 --> FC2
    RS2 --> FC1
    RS2 --> FC2

            </div>
        </div>
        
        <h2>Benchmark Results</h2>
        <table>
            <tr>
                <th>Scale</th>
                <th>Total Jobs</th>
                <th>Mean Duration</th>
                <th>Std Dev</th>
                <th>Min</th>
                <th>Max</th>
                <th>Scaling Efficiency</th>
            </tr>
            <tr>
                <td>1x</td>
                <td>7</td>
                <td>143.45s</td>
                <td>16.68s</td>
                <td>130s</td>
                <td>189s</td>
                <td>100% (baseline)</td>
            </tr>
            <tr>
                <td>2x</td>
                <td>14</td>
                <td>165.95s</td>
                <td>13.68s</td>
                <td>144s</td>
                <td>204s</td>
                <td>173% (2x jobs in 1.16x time)</td>
            </tr>
            <tr>
                <td>4x</td>
                <td>28</td>
                <td>174.30s</td>
                <td>15.95s</td>
                <td>159s</td>
                <td>220s</td>
                <td>328% (4x jobs in 1.22x time)</td>
            </tr>
        </table>
        
        <h2>Key Observations</h2>
        <ul>
            <li>‚úÖ <strong>Excellent Parallel Scaling:</strong> 4x workload completes in only 22% more time</li>
            <li>‚úÖ <strong>Consistent Performance:</strong> Low standard deviation across all scales</li>
            <li>‚úÖ <strong>HTCondor Efficiency:</strong> Local universe execution minimizes overhead</li>
        </ul>
    </div>
    
    <script>
        mermaid.initialize({ 
            startOnLoad: true,
            theme: 'dark',
            flowchart: { curve: 'basis' }
        });
    </script>
</body>
</html>
